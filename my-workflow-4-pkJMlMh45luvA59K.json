{"updatedAt":"2025-11-19T18:42:26.448Z","createdAt":"2025-11-17T12:21:36.581Z","id":"pkJMlMh45luvA59K","name":"My workflow 4","active":false,"isArchived":true,"nodes":[{"parameters":{"formTitle":"Carga Imagen","formDescription":"Carga Imagen","formFields":{"values":[{"fieldLabel":"uploadedFile","fieldType":"file","acceptFileTypes":".jpg, .png","requiredField":true}]},"options":{}},"type":"n8n-nodes-base.formTrigger","typeVersion":2.3,"position":[0,0],"id":"529c7681-152b-40dc-91f5-80635a3375ff","name":"On form submission","webhookId":"c3ba0766-2c2c-403e-8dde-912ba9cb5e49"},{"parameters":{"language":"python","pythonCode":"# Python (en nodo Code)\nfrom PIL import Image, ImageDraw, ImageFont\nfrom io import BytesIO\nimport base64\n\n# Convertimos los bytes base64 a imagen\nbinary_data = bytes(input_data[\"binary\"][\"uploadedFile\"])\nimage = Image.open(BytesIO(binary_data))\n\n# Crear dibujo y fuente\ndraw = ImageDraw.Draw(image)\nfont = ImageFont.load_default()\ntext = \"MARCA DE AGUA\"\n\n# Posición en la esquina superior derecha con un pequeño margen\nmargin = 10\ntextwidth, textheight = draw.textsize(text, font)\nx = image.width - textwidth - margin\ny = margin\n\ndraw.text((x, y), text, font=font, fill=(255, 255, 255))\n\n# Guardar imagen modificada\noutput_buffer = BytesIO()\nimage.save(output_buffer, format=\"PNG\")\nencoded_image = base64.b64encode(output_buffer.getvalue()).decode(\"utf-8\")\n\nreturn {\n    \"binary\": {\n        \"data\": {\n            \"data\": encoded_image,\n            \"mimeType\": \"image/png\",\n            \"fileName\": \"marcada.png\"\n        }\n    }\n}\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[208,0],"id":"b4bb8bd9-b76b-4072-b2bf-5ebfa42f7261","name":"Code in Python (Beta)"}],"connections":{"On form submission":{"main":[[{"node":"Code in Python (Beta)","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"faa9aab8-3222-4211-8c03-aff5d155ae64","triggerCount":0,"shared":[{"updatedAt":"2025-11-17T12:21:36.581Z","createdAt":"2025-11-17T12:21:36.581Z","role":"workflow:owner","workflowId":"pkJMlMh45luvA59K","projectId":"qKHJHnveidvROPB6"}],"tags":[]}